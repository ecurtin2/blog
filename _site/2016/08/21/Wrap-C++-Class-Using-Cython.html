<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Wrapping a C++ Class in Python Using Cython</title>
  <meta name="description" content="import C++">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2016/08/21/Wrap-C++-Class-Using-Cython.html">
  <link rel="alternate" type="application/rss+xml" title="Evan&#39;s Blog!" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Evan&#39;s Blog!</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/Blog.html">Blog</a>
            
          
            
            
            <a class="page-link" href="/CV.html">CV</a>
            
          
            
            
            <a class="page-link" href="/LICENSE.html">License</a>
            
          
            
            
            <a class="page-link" href="/about.html">About</a>
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Wrapping a C++ Class in Python Using Cython</h1>
    <p class="post-meta">
      <time datetime="2016-08-21T00:00:00-05:00" itemprop="datePublished">
        
        Aug 21, 2016
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">C</span><span class="o">++</span>
</code></pre></div></div>

<p>One of my favorite uses for Cython is to use it to wrap a C++ class in python.
The reason I like this so much is that you can easily create a class in python,
and seamlessly optimize the slow parts in C++. This way you can get all the
advantages of python, like the easy syntax and massive amount of libraries that
are trivial to implement, while still being able to speed up performance critical
 sections of your code. However, at the end of the day, the resulting class
still looks like a standard python class, just better!</p>

<p>Now there is a tutorial on <a href="http://cython.readthedocs.io/en/latest/src/userguide/wrapping_CPlusPlus.html">wrapping C++ in the Cython documentation</a>,
which looks pretty good in retrospect. However, I struggled a bit when I was
trying to learn how to do this, so I decided to write this post to help anybody
else in my situation. Enough blabbering though, let’s get to it!</p>

<h1 id="step-1-create-the-c-class">Step 1: Create the C++ Class</h1>
<hr />
<p>Let’s say we defined a C++ class in the following header file, Class.h. I’ve
made the class pretty trivial for the purpose of demonstration:</p>

<h2 id="classh">Class.h</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef CPP_MYCLASS // header guards
#define CPP_MYCLASS
</span>
<span class="k">namespace</span> <span class="n">my_namespace</span> <span class="p">{</span>
    <span class="k">class</span> <span class="nc">MyCppClass</span> <span class="p">{</span>
        <span class="k">public</span><span class="o">:</span>
            <span class="c1">//Attributes
</span>            <span class="kt">double</span> <span class="n">cpp_double</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">cpp_public</span><span class="p">;</span>
            <span class="c1">//Methods
</span>            <span class="kt">double</span> <span class="n">cpp_func</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
            <span class="kt">void</span>   <span class="n">cpp_void_func</span><span class="p">();</span>
    <span class="p">};</span>
<span class="p">}</span>
<span class="cp">#endif</span></code></pre></figure>

<p>In addition to the header file, we have defined the following implementation of
the class methods in Class.cpp:</p>

<h2 id="classcpp">Class.cpp</h2>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include "Class.h"
</span>
<span class="kt">double</span> <span class="n">my_namespace</span><span class="o">::</span><span class="n">MyCppClass</span><span class="o">::</span><span class="n">cpp_func</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">val</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">val</span> <span class="o">+=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">my_namespace</span><span class="o">::</span><span class="n">MyCppClass</span><span class="o">::</span><span class="n">cpp_void_func</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cpp_double</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Again the functions here are simple, but they can be any valid C++ function
(there are caveats which are discussed in Cython’s documentation, but I haven’t
had problems).</p>

<h1 id="step-2-wrap-the-class-using-cython">Step 2: Wrap the Class using Cython</h1>
<hr />

<p>Now this part is the meat of the problem. At first it’s a bit intimidating and
confusing to see all these variable declarations in the cpp, header and pyx
files. Once you get a handle on it it’s not too bad though. Additionally, the
redundant variable declarations could be automated (I might do this in a future
post).</p>

<h2 id="classwrapperpyx">ClassWrapper.pyx</h2>

<p><strong><em>Note:</em></strong> All the code in step 2 goes into <em>ClassWrapper.pyx</em></p>

<p>First, we have to let Cython know that the class <em>MyCppClass</em> is defined inside
the file <em>Class.h</em>. The keyword <em>extern</em> here lets us know that the class is
defined elsewhere (ie. in the header file). Using this keyword in Cython like
this implies the entire class and all attributes/methods within are defined
externally in <em>Class.h</em>. Note that only methods/attributes that want python
access need to be here.</p>

<p>The <em>except +</em> part allows Cython to handle exceptions from the constructor.
Apart from this, the class definition is identical to the one in <em>Class.h</em>,
except for there is no ; at the end of each line.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">cdef</span> <span class="k">extern</span> <span class="n">from</span> <span class="s">"Class.h"</span> <span class="k">namespace</span> <span class="s">"my_namespace"</span><span class="o">:</span>

    <span class="n">cdef</span> <span class="n">cppclass</span> <span class="n">MyCppClass</span><span class="o">:</span>
        <span class="n">MyCppClass</span><span class="p">()</span> <span class="n">except</span> <span class="o">+</span>
        <span class="cp">#Attributes
</span>        <span class="kt">double</span> <span class="n">cpp_double</span>
        <span class="kt">double</span> <span class="n">cpp_public</span>

        <span class="cp">#Methods
</span>        <span class="kt">double</span> <span class="n">cpp_func</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
        <span class="kt">void</span> <span class="n">cpp_void_func</span><span class="p">()</span></code></pre></figure>

<h3 id="create-the-wrapper-class">Create the Wrapper Class</h3>

<p>Ok, so we’ve told Cython that <em>MyCppClass</em> is defined elsewhere. If we want
python access to the class (which we do, if you’ve read this far) we have to
create a wrapper class around the C++ class. I treat this first portion as
boilerplate, it allows us to allocate a new instance of <em>MyCppClass</em> when we
instantiate <em>WrapperClass</em>.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">cdef</span> <span class="k">class</span> <span class="nc">WrapperClass</span><span class="p">:</span>
    <span class="n">cdef</span> <span class="n">MyCppClass</span><span class="o">*</span> <span class="n">C_Class</span>

    <span class="k">def</span> <span class="nf">__cinit__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MyCppClass</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__dealloc__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span></code></pre></figure>

<p>Once we allow for instantiation of the class from python, we can define all
sorts of member functions and attributes <strong><em>just as we would for a standard
python class</em></strong>. So we can define the <strong>__init__</strong> function to set up some
attributes with a value at the time of instantiation (we’ll get to
<em>self.Mydouble</em>, I promise).</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">Mydouble</span> <span class="o">=</span> <span class="n">value</span></code></pre></figure>

<p>That’s the boring part though. Here’s the magic. We can define a python-style
function (note the <em>def</em> and not <em>cdef</em>) which casts the input to the appropriate
 c-type and then calls the <em>C++ level function</em> of our choice. I have examples
here of a function that returns a double and a void function. Additionally, we
can just use regular python here if we wish (for functions which don’t need to be sped up by C++).</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>        
    <span class="n">cdef</span> <span class="n">double</span> <span class="n">c_x</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">cdef</span> <span class="nb">int</span>    <span class="n">c_i</span> <span class="o">=</span> <span class="n">i</span>
    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span><span class="o">.</span><span class="n">cpp_func</span><span class="p">(</span><span class="n">c_x</span><span class="p">,</span> <span class="n">c_i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">val</span>

<span class="k">def</span> <span class="nf">void_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span><span class="o">.</span><span class="n">cpp_void_func</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">python_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>  </code></pre></figure>

<h3 id="define-properties-allows-for-settinggetting-them-in-python">Define properties, allows for setting/getting them in python</h3>
<p>If you jumped the gun and tried to do this already, you might have noticed that
you don’t have access to the C++ variables directly from python. This is because
 we’re defining a wrapper class, whos attributes are only the ones we define
within the scope of <em>WrapperClass</em>. If we want to have read/write access to the
C++ level variables, we can use the python property function to do what we want.</p>

<p>Just define a function to set the C++ level variable and another one to get it
like so:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_cpp_double</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span><span class="o">.</span><span class="n">cpp_double</span>

<span class="k">def</span> <span class="nf">set_cpp_double</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">cdef</span> <span class="n">double</span> <span class="n">val</span> <span class="o">=</span> <span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span><span class="o">.</span><span class="n">cpp_double</span> <span class="o">=</span> <span class="n">val</span></code></pre></figure>

<p>And the property function takes care of the rest:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">Mydouble</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_cpp_double</span><span class="p">,</span> <span class="n">set_cpp_double</span><span class="p">)</span></code></pre></figure>

<p>So now we have an attribute of <em>WrapperClass</em> called <em>Mydouble</em>. However,
<em>Mydouble</em> is basically an alias for the C++ level attribute <em>cpp_double</em>. If
you want to use the same names for C++ and Python variables, see the guide
<a href="http://cython.readthedocs.io/en/latest/src/userguide/external_C_code.html#resolve-conflicts">here</a>
, but I’ll just use different names for now.</p>

<p>Once the property defined in the .pyx file, you can use it within the wrapper
class as though it were a python variable (see <em>self.Mydouble</em> in __init__).</p>

<h1 id="3-compile">3) Compile</h1>

<p>The easiest way to compile our Cython code is to use <em>distutils</em> and <em>cythonize</em>
in a python script. Simply include all the source files and make sure the
compiler knows to use C++.</p>

<h2 id="setuppy">Setup.py</h2>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>
<span class="kn">from</span> <span class="nn">Cython.Build</span> <span class="kn">import</span> <span class="n">cythonize</span>
<span class="kn">from</span> <span class="nn">distutils.extension</span> <span class="kn">import</span> <span class="n">Extension</span>

<span class="n">sourcefiles</span>  <span class="o">=</span> <span class="p">[</span><span class="s">'ClassWrapper.pyx'</span><span class="p">,</span> <span class="s">'Class.cpp'</span><span class="p">]</span>
<span class="n">compile_opts</span> <span class="o">=</span> <span class="p">[</span><span class="s">'-std=c++11'</span><span class="p">]</span>
<span class="n">ext</span><span class="o">=</span><span class="p">[</span><span class="n">Extension</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span>
            <span class="n">sourcefiles</span><span class="p">,</span>
            <span class="n">extra_compile_args</span><span class="o">=</span><span class="n">compile_opts</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="s">'c++'</span><span class="p">)]</span>

<span class="n">setup</span><span class="p">(</span>
  <span class="n">ext_modules</span><span class="o">=</span><span class="n">cythonize</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
<span class="p">)</span></code></pre></figure>

<p>To compile just run:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">inplace</span></code></pre></figure>

<p>in the directory with all the files. I essentially use the same setup file for
all of my projects.</p>

<h1 id="4-import-and-use">4) Import and use</h1>

<p>Whew! That was tiresome. Now we get to reap the rewards of all the hard work!
Once we run <em>setup.py</em> and compile our code, we should get a shared object file,
<em>ClassWrapper.so</em>. We can now import this just like any other python module. We
then have access to the class from the python level.</p>

<p>We can instantiate the class, and set the value of <em>self.Mydouble</em> to anything
that can be cast to a double:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">ClassWrapper</span>
<span class="n">instance</span> <span class="o">=</span> <span class="n">ClassWrapper</span><span class="o">.</span><span class="n">WrapperClass</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">Mydouble</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="mf">5.0</span></code></pre></figure>

<p>We have read/write access via the <em>set_cpp_double</em> and <em>get_cpp_double</em>
functions which we call thusly:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">instance</span><span class="o">.</span><span class="n">Mydouble</span> <span class="o">=</span> <span class="mf">34.5</span>  <span class="c">#setter</span>
<span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">Mydouble</span>   <span class="c">#getter</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="mf">34.5</span></code></pre></figure>

<p>We can call a void function, which changes the value of the C++ attribute
<em>cpp_double</em>. Since we wrapped this variable with the python level property
<em>Mydouble</em>, calling this function changes the value of <em>Mydouble</em>.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">instance</span><span class="o">.</span><span class="n">void_func</span><span class="p">()</span>
<span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">Mydouble</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="mf">1.2</span></code></pre></figure>

<p>We can also call functions that take and return values, like this silly
implementation of multiplication:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="mf">3.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="mf">35.0</span></code></pre></figure>

<p>And if we try to use the wrong variable type, we get an exception:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="s">'Wrongtype!'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">---------------------------------------------------------------------------</span>

<span class="nb">TypeError</span>                                 <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">aa4d173bd403</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="k">print</span> <span class="n">instance</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="s">'Wrongtype!'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>


<span class="o">./</span><span class="n">ClassWrapper</span><span class="o">.</span><span class="n">pyx</span> <span class="ow">in</span> <span class="n">ClassWrapper</span><span class="o">.</span><span class="n">WrapperClass</span><span class="o">.</span><span class="n">func</span> <span class="p">(</span><span class="n">ClassWrapper</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">1057</span><span class="p">)()</span>
     <span class="mi">30</span>
     <span class="mi">31</span>     <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="o">---&gt;</span> <span class="mi">32</span>         <span class="n">cdef</span> <span class="n">double</span> <span class="n">c_x</span> <span class="o">=</span> <span class="n">x</span>
     <span class="mi">33</span>         <span class="n">cdef</span> <span class="nb">int</span>    <span class="n">c_i</span> <span class="o">=</span> <span class="n">i</span>
     <span class="mi">34</span>         <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_Class</span><span class="o">.</span><span class="n">cpp_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>


<span class="nb">TypeError</span><span class="p">:</span> <span class="n">a</span> <span class="nb">float</span> <span class="ow">is</span> <span class="n">required</span></code></pre></figure>

<p>And finally, you get an exception if you try to use a variable that’s not a property in
<em>WrapperClass</em>, even though it’s declared <em>public</em>.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">instance</span><span class="o">.</span><span class="n">cpp_public</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">---------------------------------------------------------------------------</span>

<span class="nb">AttributeError</span>                            <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">a6bc21d6fa3e</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">instance</span><span class="o">.</span><span class="n">cpp_public</span>


<span class="nb">AttributeError</span><span class="p">:</span> <span class="s">'ClassWrapper.WrapperClass'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s">'cpp_public'</span></code></pre></figure>

<h1 id="conclusion">Conclusion</h1>

<p>So, we went through how to wrap a C++ class in python using Cython. I really like being
able to selectively optimize various function as needed. This allows me to use
python when I want to, and C++ only when I need to (I may be a bit biased towards
 python, but so is any sane person).</p>

<p>Now I am aware that Cython offers functionality of defining c-level functions
within the .pyx files, and many of these can match the speed of optimized C++
code. However, I find it a bit easier to just wrap C++ directly, since I know
that I’m getting the best speed and don’t have to worry about the nuances of
Cython (I think it’s easier to write fast C++ code than it is to write fast
Cython code, particularly for more complex functions). Additionally, If you
already have C++ code lying around, you don’t have to rewrite anything!</p>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Evan&#39;s Blog!</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Evan&#39;s Blog!
            
            </li>
            
            <li><a href="mailto:evanmcurtin@gmail.com">evanmcurtin@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ecurtin2"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ecurtin2</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/emc923"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">emc923</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Overthinking simple questions since 2016 (kinda).</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
